
ОБЛАСТЬ ДІЇ ЗМІННОЇ (Variable Scope) у лямбда-виразі
Java зачіпає одну з концепцій, доданих в Java 8,
ефективно/фактично final (Effectively final) у Java.

Лямбда-вираз у Java НЕ МАЄ власної області видимості,
він МАЄ ТУ САМУ область видимості, що і навколишня його область.

Це призводить до помилки, якщо змінна, визначена в лямбда-виразі,
має те саме ім'я, що і змінна в області, що її охоплює.
demos/_04_Variable_Scope/_01/_011

Оскільки лямбда-вираз не вводить новий рівень області видимості,
МОЖНА безпосередньо звертатися до полів, методів та локальних
змінних довкілля.

ОДНАК існує ОБМЕЖЕННЯ на використання змінних з охоплюючої
області. Подібно до локальних та анонімних класів, лямбда-вираз
МОЖЕ звертатися лише до локальних змінних та параметрів
навколишнього середовища, які є final або ефективно final.

Лямбда-вирази МОЖУТЬ ВИКОРИСТОВУВАТИ змінні, визначені у зовнішній
області. Вони МОЖУТЬ ЗАХОПЛЮВАТИ (робити копію) статичні змінні,
змінні екземпляру та локальні змінні, АЛЕ тільки локальні змінні
повинні бути остаточними (final) або фактично остаточними
(effectively final).

Ефективна остаточна (effectively final) ЗМІННА в Java - змінна,
значення якої не може бути змінено після присвоєння. Таким чином,
будь-яка змінна охоплюючої області видимості МОЖЕ бути АБО
оголошена як final, АБО за умовчанням вона фактично є final
і не може бути змінена у лямбда-виразі або у внутрішньому класі.

* До Java 8 було обов'язково визначати поле, яке використовується
у внутрішньому класі, як final. У Java 8 це трохи пом'якшено, і
немає необхідності явно оголошувати такі поля, як final.

ЧОМУ таке обмеження для змінної області видимості.
Лямбда-вираз, що використовує змінні з охоплюючої області,
захоплює значення таких змінних.
ОСКІЛЬКИ лямбда-вираз у Java є екземпляром функціонального
інтерфейсу, поля охоплюючої області, що використовуються в
такому екземплярі, фіксують значення цих полів та використовують
їх.
ВАЖЛИВО підтримувати стан таких полів, щоб вони не змінювалися,
тому це обмеження "фактично остаточне" ("effectively final").


